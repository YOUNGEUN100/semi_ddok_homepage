<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	
	
	<!--레시피 리스트-->
	<mapper namespace="com.example.mini.mapper.RecipeMapper">
		<select id="selectRecListAll" parameterType="hashmap" resultType="com.example.mini.model.Recipe">
	  SELECT  
				R.RECIPE_NO,
				RECIPE_NAME,
				TIME,
				DIFFICULTY,
				RECIPE_HITS,
				DELETE_YN,
				CDATETIME,
				UDATETIME,
				IMG_PATH
			FROM T4_RECIPE R
			INNER JOIN 
				(SELECT RECIPE_NO, IMG_PATH
				FROM T4_R_IMAGE
				WHERE THUMBNAIL_YN = 'Y') I 
			ON I.RECIPE_NO = R.RECIPE_NO 
		</select>
		
		<select id="selectRecList" parameterType="hashmap" resultType="com.example.mini.model.Recipe">	
			SELECT P.RECIPE_NO, RECIPE_NAME, TIME, DIFFICULTY, RECIPE_HITS, IMG_PATH, CODE
			FROM 
			(	SELECT  
					R.RECIPE_NO AS RECIPE_NO,
					RECIPE_NAME,
					TIME,
					DIFFICULTY,
					RECIPE_HITS,
					DELETE_YN,
					CDATETIME,
					UDATETIME,
					IMG_PATH
					FROM T4_RECIPE R
					INNER JOIN 
						(SELECT RECIPE_NO, IMG_PATH
						FROM T4_R_IMAGE
						WHERE THUMBNAIL_YN = 'Y') I 
					ON I.RECIPE_NO = R.RECIPE_NO
				) R
			LEFT JOIN T4_R_PURPOSE P ON P.RECIPE_NO = R.RECIPE_NO
			<if test="recipe_kind !='' and recipe_kind != null">
			WHERE CODE = #{recipe_kind}
			</if>
		</select>
		
		<select id="selectRecipeKind" parameterType="hashmap" resultType="com.example.mini.model.Code">	
			SELECT 
				KIND,
				CODE,
				NAME
			FROM T4_CODE
			WHERE KIND = 'R_PURPOSE' || KIND = 'HOWTO' || KIND = 'TOOL'
		</select>
	
	
		
		
	</mapper>